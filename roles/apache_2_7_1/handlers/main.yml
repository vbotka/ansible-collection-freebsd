---
- name: Handlers for vbotka.apache
  when: ansible_role_name == "vbotka.apache"
  block:

    - name: Enable and start apache
      listen: enable and start apache
      ansible.builtin.service:
        name: "{{ apache_service }}"
        state: started
        enabled: true

    - name: Disable and stop apache
      listen: disable and stop apache
      ansible.builtin.service:
        name: "{{ apache_service }}"
        state: stopped
        enabled: false

    - name: Restart apache
      listen: restart apache
      when: apache_enable | bool
      ansible.builtin.service:
        name: "{{ apache_service }}"
        state: restarted

    - name: Reload apache
      listen: reload apache
      when: apache_enable | bool
      ansible.builtin.service:
        name: "{{ apache_service }}"
        state: reloaded

    - name: Graceful apache  # noqa: no-changed-when
      listen: graceful apache
      when: apache_enable | bool
      ansible.builtin.command:
        cmd: /usr/local/etc/rc.d/{{ apache_service }} graceful

    - name: Gracefulstop apache  # noqa: no-changed-when
      listen: gracefulstop apache
      when: apache_enable | bool
      ansible.builtin.command:
        cmd: /usr/local/etc/rc.d/{{ apache_service }} gracefulstop

- name: Handlers for vbotka.freebsd.apache
  when: ansible_role_name == "vbotka.freebsd.apache"
  block:

    - name: Enable and start apache
      listen: enable and start apache
      vbotka.freebsd.service:
        script: "{{ apache_service }}"
        command: start

    - name: Disable and stop apache
      listen: disable and stop apache
      vbotka.freebsd.service:
        script: "{{ apache_service }}"
        command: stop

    - name: Restart apache
      listen: restart apache
      when: apache_enable | bool
      vbotka.freebsd.service:
        script: "{{ apache_service }}"
        command: restart

    - name: Reload apache
      listen: reload apache
      when: apache_enable | bool
      vbotka.freebsd.service:
        script: "{{ apache_service }}"
        command: reload

    - name: Graceful apache
      listen: graceful apache
      when: apache_enable | bool
      vbotka.freebsd.service:
        script: "{{ apache_service }}"
        command: graceful

    - name: Gracefulstop apache
      listen: gracefulstop apache
      when: apache_enable | bool
      vbotka.freebsd.service:
        script: "{{ apache_service }}"
        command: gracefulstop

# EOF
