---
- name: "Httpd-confd-includes: Include al_include_confd_vars_list"
  vars:
    al_include_confd_dir: "{{ apache_confd_dir_sections }}"
    al_include_confd_vars_list_type: fname
  ansible.builtin.include_role:
    name: "{{ apache_ansible_lib[ansible_role_name] }}"
    tasks_from: al_include_confd_vars_list

- name: "Httpd-confd-includes: Debug al_include_confd_vars_list apache_debug={{ apache_debug }}"
  when: apache_debug | bool
  ansible.builtin.debug:
    var: item
  loop: "{{ al_include_confd_vars_list }}"

- name: "Httpd-confd-includes: Configure sections in {{ apache_conf_path ~ '/Includes/' }}"
  notify: reload apache
  ansible.builtin.template:
    src: section2.j2
    dest: "{{ apache_conf_path }}/Includes/{{ item.fname }}.conf"
    owner: "{{ apache_data_owner }}"
    group: "{{ apache_data_group }}"
    mode: "{{ apache_data_mode }}"
    backup: "{{ apache_backup_conf }}"
  loop: "{{ al_include_confd_vars_list }}"

# EOF
