- name: Create Ansible client templates.
  hosts: iocage
  environment: "{{ freebsd_iocage_runner_env | d({}) }}"

  vars:

    debug: false
    debug2: false
    basejails_stop: false

  tasks:

    - name: Setup
      tags: [always, setup]
      import_tasks: tasks/setup.yml

    - name: Basejails create
      tags: basejails_create
      import_tasks: tasks/basejails_create.yml

    - name: Basejails start
      tags: basejails_start
      import_tasks: tasks/basejails_start.yml

    - name: Basejails install packages
      tags: basejails_pkg
      import_tasks: tasks/basejails_pkg.yml

    - name: Basejails stop
      when: basejails_stop | bool
      tags: basejails_stop
      import_tasks: tasks/basejails_stop.yml
